using System.Text;

namespace EducationalMalwareKit.Domain.Build
{
    public class UserOptions
    {
        public bool Debug { get; set; }
        public bool CleanOutputDirectory { get; set; }
        public bool PackageOutput { get; set; }
        public bool EncryptPayload { get; set; }

        private string _executableName;
        private readonly string _encryptionKey;
        private readonly string _encryptionSalt;

        public byte[] EncryptionKeyBytes => Encoding.UTF8.GetBytes(_encryptionKey);
        public byte[] EncryptionSaltBytes => Encoding.UTF8.GetBytes(_encryptionSalt);

        public string ExecutableName
        {
            get
            {
                if (string.IsNullOrWhiteSpace(_executableName))
                {
                    return "program.exe";
                }

                return _executableName.EndsWith(".exe") ? _executableName : _executableName + ".exe";
            }
            set => _executableName = value;
        }

        public UserOptions(string encryptionkey, string encryptionSalt)
        {
            _encryptionKey = encryptionkey;
            _encryptionSalt = encryptionSalt;
        }
    }
}
