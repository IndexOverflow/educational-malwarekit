using System;
using System.IO;
using EasyConsole;

namespace EducationalMalwareKit.CLI
{
    internal static class InputHelper
    {
        public static bool ParseStringAsBool(object input)
        {
            if (input == null)
            {
                return false;
            }

            var boolInput = (string)input;

            return boolInput.StartsWith("y", StringComparison.InvariantCultureIgnoreCase);
        }

        public static string ReadRequiredString(string prompt)
        {
            string val;
            var passes = 0;

            do
            {
                val = Input.ReadString(passes++ < 1 ? prompt : "REQUIRED VALUE: " + prompt);

            } while (string.IsNullOrEmpty(val));

            return val;
        }

        public static string GetValidIconFilePath(string userOptionsIconFilePath, string defaultIconFile)
        {
            if (!string.IsNullOrWhiteSpace(userOptionsIconFilePath))
            {
                var fileInfo = new FileInfo(userOptionsIconFilePath);

                if (fileInfo.Exists && fileInfo.Extension == ".ico")
                {
                    return userOptionsIconFilePath;
                }                
            }

            return defaultIconFile;
        }
    }
}
